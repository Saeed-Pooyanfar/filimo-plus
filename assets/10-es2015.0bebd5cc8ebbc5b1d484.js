(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{X3zk:function(t,e,i){"use strict";i.r(e),i.d(e,"LoginModule",(function(){return h}));var n=i("PCNd"),o=i("tyNb"),r=i("3Pt+"),s=i("d8ZE"),b=i("AytR"),c=i("fXoL"),a=i("8PDw"),p=i("1jTv"),u=i("ofXK");function g(t,e){if(1&t){const t=c.Nb();c.Kb(0),c.Mb(1,"form",4),c.Tb("ngSubmit",(function(){return c.Zb(t),c.Vb().requestOtp()})),c.Mb(2,"h1",5),c.ec(3,"\u0627\u06af\u0631 \u062f\u0631 \u0641\u06cc\u0644\u06cc\u0645\u0648 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062f\u0627\u0631\u06cc\u062f\u060c \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f:"),c.Lb(),c.Mb(4,"div",6),c.Mb(5,"div",7),c.Mb(6,"span",8),c.ec(7,"+98"),c.Lb(),c.Lb(),c.Ib(8,"input",9),c.Lb(),c.Mb(9,"button",10),c.ec(10,"\u0648\u0631\u0648\u062f"),c.Lb(),c.Lb(),c.Jb()}if(2&t){const t=c.Vb();c.xb(1),c.Wb("formGroup",t.requestOtpForm)}}function m(t,e){if(1&t){const t=c.Nb();c.Kb(0),c.Mb(1,"form",4),c.Tb("ngSubmit",(function(){return c.Zb(t),c.Vb().verifyOtp()})),c.Mb(2,"h1",5),c.ec(3,"\u06a9\u062f \u0641\u0631\u0633\u062a\u0627\u062f\u0647 \u0634\u062f\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"),c.Lb(),c.Mb(4,"div",6),c.Mb(5,"div",7),c.Mb(6,"span",8),c.Ib(7,"img",11),c.Lb(),c.Lb(),c.Ib(8,"input",12),c.Lb(),c.Mb(9,"button",10),c.ec(10,"\u0627\u062f\u0627\u0645\u0647"),c.Lb(),c.Mb(11,"div",13),c.Mb(12,"span",14),c.Tb("click",(function(){return c.Zb(t),c.Vb().firstStep()})),c.ec(13,"\u0628\u0627\u0632\u06af\u0634\u062a"),c.Lb(),c.Lb(),c.Lb(),c.Jb()}if(2&t){const t=c.Vb();c.xb(1),c.Wb("formGroup",t.verifyOtpForm)}}const l=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.formBuilder=t,this.authService=e,this.snackbarService=i,this.router=n,this.step=1,this.requestOtpForm=this.formBuilder.group({mobile:["",[r.i.required,r.i.minLength(10),t=>/^[0-9]+$/g.test(t.value)?null:{mobile:"must be numeric"}]]}),this.verifyOtpForm=this.formBuilder.group({otp:["",[r.i.required,r.i.minLength(6),t=>/^[0-9]+$/g.test(t.value)?null:{otp:"must be numeric"}]]}),this.guid="",this.tempId="",this.mobile=""}ngOnInit(){}requestOtp(){const t=this.requestOtpForm.controls.mobile;s.a.i("LoginComponent#requestOtp",t),t.invalid?this.snackbarService.showMessage("\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 10 \u0631\u0642\u0645 \u0628\u0627\u0634\u062f"):(this.mobile="0"+t.value,this.authService.requestOtp(this.mobile).subscribe({next:t=>{s.a.i("AuthService#requestOtp",t),t.success&&(this.guid=t.data.guid,this.tempId=t.data.tempId,this.step=2)}}))}verifyOtp(){const t=this.verifyOtpForm.controls.otp;s.a.i("LoginComponent#verifyOtp",t),t.invalid?this.snackbarService.showMessage("\u06a9\u062f \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 6 \u0631\u0642\u0645 \u0628\u0627\u0634\u062f"):this.authService.verifyOtp(this.guid,this.tempId,this.mobile,t.value).subscribe({next:t=>{s.a.i("AuthService#verifyOtp",t),t.success&&(localStorage.setItem("jwt_token",t.data.token),b.a.production||localStorage.setItem("b_jwt_token",t.data.token),this.router.navigate(["home"]))}})}firstStep(){this.step=1}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(r.b),c.Hb(a.a),c.Hb(p.a),c.Hb(o.e))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"body","text-center"],[1,"form-signin"],["src","assets/images/filimo_logo.svg","alt","","width","72","height","72",1,"mb-4"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"h6","mb-3","font-weight-normal"],["dir","ltr",1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Mobile","aria-label","Mobile","formControlName","mobile",1,"form-control"],["type","submit",1,"mt-3","btn","btn-lg","btn-success","btn-block"],["src","assets/images/password.svg","alt","","width","24px","height","24px"],["type","text","placeholder","Code","aria-label","Code","formControlName","otp",1,"form-control"],[1,"back","mt-3","text-right","small"],[3,"click"]],template:function(t,e){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Ib(2,"img",2),c.dc(3,g,11,1,"ng-container",3),c.dc(4,m,14,1,"ng-container",3),c.Lb(),c.Lb()),2&t&&(c.xb(3),c.Wb("ngIf",1===e.step),c.xb(1),c.Wb("ngIf",2===e.step))},directives:[u.i,r.j,r.f,r.d,r.a,r.e,r.c],styles:[".body[_ngcontent-%COMP%]{color:#262626;background-image:url(/assets/images/login_bg.jpg);background-repeat:no-repeat;background-size:cover;background-position:50%;display:flex;align-items:center;justify-content:center;padding-top:40px;padding-bottom:40px}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:0 auto}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),t})()}];let d=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(l)],o.g]}),t})(),h=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[n.a,d]]}),t})()}}]);