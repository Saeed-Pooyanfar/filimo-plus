!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{X3zk:function(n,o,i){"use strict";i.r(o),i.d(o,"LoginModule",function(){return y});var r=i("PCNd"),s=i("tyNb"),c=i("3Pt+"),a=i("d8ZE"),b=i("AytR"),u=i("fXoL"),p=i("8PDw"),g=i("1jTv"),l=i("ofXK");function m(t,e){if(1&t){var n=u.Mb();u.Jb(0),u.Lb(1,"form",4),u.Sb("ngSubmit",function(){return u.Yb(n),u.Ub().request()}),u.Lb(2,"h1",5),u.ec(3,"\u0627\u06af\u0631 \u062f\u0631 \u0641\u06cc\u0644\u06cc\u0645\u0648 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062f\u0627\u0631\u06cc\u062f\u060c \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f:"),u.Kb(),u.Lb(4,"div",6),u.Lb(5,"div",7),u.Lb(6,"span",8),u.ec(7,"@"),u.Kb(),u.Kb(),u.Hb(8,"input",9),u.Kb(),u.Lb(9,"div",10),u.Lb(10,"input",11),u.Sb("input",function(t){return u.Yb(n),u.Ub().saveLoginOtp(t)}),u.Kb(),u.Lb(11,"label",12),u.ec(12,"\u0648\u0631\u0648\u062f \u0628\u0627 \u067e\u06cc\u0627\u0645\u06a9"),u.Kb(),u.Kb(),u.Lb(13,"button",13),u.ec(14,"\u0648\u0631\u0648\u062f"),u.Kb(),u.Kb(),u.Ib()}if(2&t){var o=u.Ub();u.wb(1),u.Vb("formGroup",o.firstStepForm),u.wb(9),u.Vb("checked",o.otp)}}function d(t,e){if(1&t){var n=u.Mb();u.Jb(0),u.Lb(1,"form",4),u.Sb("ngSubmit",function(){return u.Yb(n),u.Ub().verify()}),u.Lb(2,"h1",5),u.ec(3),u.Kb(),u.Lb(4,"div",6),u.Lb(5,"div",7),u.Lb(6,"span",8),u.Hb(7,"img",14),u.Kb(),u.Kb(),u.Hb(8,"input",15),u.Kb(),u.Lb(9,"button",13),u.ec(10,"\u0627\u062f\u0627\u0645\u0647"),u.Kb(),u.Lb(11,"div",16),u.Lb(12,"span",17),u.Sb("click",function(){return u.Yb(n),u.Ub().firstStep()}),u.ec(13,"\u0628\u0627\u0632\u06af\u0634\u062a"),u.Kb(),u.Kb(),u.Kb(),u.Ib()}if(2&t){var o=u.Ub();u.wb(1),u.Vb("formGroup",o.secondStepForm),u.wb(2),u.gc(" ",o.otp?"\u06a9\u062f \u0641\u0631\u0633\u062a\u0627\u062f\u0647 \u0634\u062f\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:":"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"," "),u.wb(5),u.Vb("placeholder",o.otp?"Code":"Password")}}var f,h,v,k=[{path:"",component:(f=function(){function n(e,o,i,r){t(this,n),this.formBuilder=e,this.authService=o,this.snackbarService=i,this.router=r,this.step=1,this.otp=Boolean(Number(localStorage.getItem("login_otp")||1)),this.firstStepForm=this.formBuilder.group({account:["",[c.i.required]]}),this.secondStepForm=this.formBuilder.group({pass:["",[c.i.required]]}),this.guid="",this.tempId="",this.account=""}var o,i,r;return o=n,(i=[{key:"ngOnInit",value:function(){}},{key:"request",value:function(){var t=this,e=this.firstStepForm.controls.account;a.a.i("LoginComponent#request",e),e.invalid?this.snackbarService.showMessage("\u0627\u06cc\u0645\u06cc\u0644 \u06cc\u0627 \u0645\u0648\u0628\u0627\u06cc\u0644 \u06cc\u0627 \u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"):(this.account=e.value,this.authService.request(e.value,this.otp).subscribe({next:function(e){a.a.i("AuthService#request",e),e.success?(t.guid=e.data.guid,t.tempId=e.data.tempId,t.step=2):t.snackbarService.showMessage(e.message)}}))}},{key:"verify",value:function(){var t=this,e=this.secondStepForm.controls.pass;a.a.i("LoginComponent#verify",e),e.invalid?this.snackbarService.showMessage(this.otp?"\u06a9\u062f \u0648\u0627\u0631\u062f \u0646\u0634\u062f\u0647 \u0627\u0633\u062a":"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0648\u0627\u0631\u062f \u0646\u0634\u062f\u0647 \u0627\u0633\u062a"):this.authService.verify(this.guid,this.tempId,this.account,e.value,this.otp).subscribe({next:function(e){a.a.i("AuthService#verify",e),e.success?(localStorage.setItem("jwt_token",e.data.token),b.a.production||localStorage.setItem("b_jwt_token",e.data.token),t.router.navigate(["home"])):t.snackbarService.showMessage(e.message)}})}},{key:"firstStep",value:function(){this.step=1,this.secondStepForm.controls.pass.setValue("")}},{key:"saveLoginOtp",value:function(t){this.otp=t.target.checked,localStorage.setItem("login_otp",this.otp?"1":"0")}}])&&e(o.prototype,i),r&&e(o,r),n}(),f.\u0275fac=function(t){return new(t||f)(u.Gb(c.b),u.Gb(p.a),u.Gb(g.a),u.Gb(s.e))},f.\u0275cmp=u.Ab({type:f,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"body","text-center"],[1,"form-signin"],["src","assets/images/filimo_logo.svg","alt","","width","72","height","72",1,"mb-4"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"h6","mb-3","font-weight-normal"],["dir","ltr",1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Email or Mobile or Username","aria-label","EmailOrMobileOrUsername","formControlName","account",1,"form-control"],[1,"form-check","mt-2"],["type","checkbox","id","login-otp",1,"form-check-input",3,"checked","input"],["for","login-otp",1,"form-check-label"],["type","submit",1,"mt-3","btn","btn-lg","btn-success","btn-block"],["src","assets/images/password.svg","alt","","width","24px","height","24px"],["type","password","aria-label","CodeOrPassword","formControlName","pass",1,"form-control",3,"placeholder"],[1,"back","mt-3","text-right","small"],[3,"click"]],template:function(t,e){1&t&&(u.Lb(0,"div",0),u.Lb(1,"div",1),u.Hb(2,"img",2),u.dc(3,m,15,2,"ng-container",3),u.dc(4,d,14,3,"ng-container",3),u.Kb(),u.Kb()),2&t&&(u.wb(3),u.Vb("ngIf",1===e.step),u.wb(1),u.Vb("ngIf",2===e.step))},directives:[l.i,c.j,c.f,c.d,c.a,c.e,c.c],styles:[".body[_ngcontent-%COMP%]{color:#262626;background-image:url(/assets/images/login_bg.jpg);background-repeat:no-repeat;background-size:cover;background-position:50%;display:flex;align-items:center;justify-content:center;padding-top:40px;padding-bottom:40px}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:0 auto}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{text-align:right}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:auto}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:1.25rem;font-size:.8rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),f)}],w=((v=function e(){t(this,e)}).\u0275mod=u.Eb({type:v}),v.\u0275inj=u.Db({factory:function(t){return new(t||v)},imports:[[s.g.forChild(k)],s.g]}),v),y=((h=function e(){t(this,e)}).\u0275mod=u.Eb({type:h}),h.\u0275inj=u.Db({factory:function(t){return new(t||h)},imports:[[r.a,w]]}),h)}}])}();