(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{QtGm:function(t,a,i){"use strict";i.r(a),i.d(a,"TagModule",(function(){return k}));var e=i("tyNb"),n=i("d8ZE"),s=i("fXoL"),r=i("VHXb"),o=i("AytR"),c=i("tk/3");let l=(()=>{class t{constructor(t){this.http=t}getList(t){return this.http.post(o.a.baseUrl+"/tag/index",{tag:t})}next(t){return this.http.post(o.a.baseUrl+"/tag/next",{next:t})}}return t.\u0275fac=function(a){return new(a||t)(s.Qb(c.b))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac}),t})();var b=i("73Ib"),g=i("ofXK"),p=i("FLaK"),d=i("ySUH");function u(t,a){if(1&t&&(s.Kb(0),s.Ib(1,"app-grid",4),s.Jb()),2&t){const t=a.$implicit,i=s.Vb();s.xb(1),s.Wb("includeTagLink",i.tag.multiSection)("list",t)}}function f(t,a){if(1&t){const t=s.Nb();s.Mb(0,"app-infinite-scroll",5),s.Tb("loadingChange",(function(a){return s.Zb(t),s.Vb().infiniteScroll.loading=a})),s.Lb()}if(2&t){const t=s.Vb(),a=s.Yb(2);s.Wb("container",a)("disable",t.infiniteScroll.disable)("callback",t.infiniteScroll.callback)("loading",t.infiniteScroll.loading)}}let h=(()=>{class t{constructor(t,a,i){this.appData=t,this.tagService=a,this.activatedRoute=i}ngOnInit(){this.activatedRoute.data.subscribe({next:t=>{this.tag=t.tag,document.querySelector(".body").scrollTo({top:0,behavior:"smooth"})}}),this.infiniteScroll={disable:!this.tag.next,loading:!1,callback:()=>{this.tagService.next(this.tag.next).subscribe({next:t=>{n.a.i("TagService#next",t),t.success&&(this.tag.multiSection?this.tag.lists=this.tag.lists.concat(t.data.lists):this.tag.lists[0].items=this.tag.lists[0].items.concat(t.data.listItems),this.tag.next=t.data.next,this.infiniteScroll.disable=!this.tag.next)},error:t=>{n.a.e("TagService#next",t)},complete:()=>{this.infiniteScroll.loading=!1}})}}}ngOnDestroy(){const t=this.appData.tag.findIndex(t=>t.slug===this.tag.slug);1!==t&&(this.appData.tag[t]=this.tag)}}return t.\u0275fac=function(a){return new(a||t)(s.Hb(r.a),s.Hb(l),s.Hb(e.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["app-tag"]],decls:5,vars:2,consts:[[1,"body","vertical-padding"],["scrollContainer",""],[4,"ngFor","ngForOf"],[3,"container","disable","callback","loading","loadingChange",4,"ngIf"],[3,"includeTagLink","list"],[3,"container","disable","callback","loading","loadingChange"]],template:function(t,a){if(1&t&&(s.Ib(0,"app-toolbar"),s.Mb(1,"div",0,1),s.ec(3,u,2,2,"ng-container",2),s.ec(4,f,1,4,"app-infinite-scroll",3),s.Lb()),2&t){const t=s.Yb(2);s.xb(3),s.Wb("ngForOf",a.tag.lists),s.xb(1),s.Wb("ngIf",t)}},directives:[b.a,g.h,g.i,p.a,d.a],styles:[""]}),t})();var v=i("mrSG"),m=i("vnd8");let x=(()=>{class t{constructor(t,a){this.appData=t,this.tagService=a}resolve(t){const a=t.paramMap.get("id")||"";return new Promise((t,i)=>{const e=this.appData.tag.find(t=>t.slug===a);e?t(e):this.tagService.getList(a).subscribe({next:a=>{if(n.a.i("TagResolver#resolve",a),a.success)return this.appData.tag.push(a.data),void t(a.data);i(new Error(a.message))},error:t=>{i(new Error(t))}})})}}return t.\u0275fac=function(a){return new(a||t)(s.Qb(r.a),s.Qb(l))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac}),Object(v.c)([Object(m.a)()],t.prototype,"resolve",null),t})();const S=[{path:"",component:h,resolve:{tag:x}}];let y=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(a){return new(a||t)},imports:[[e.g.forChild(S)],e.g]}),t})();var w=i("PCNd");let k=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(a){return new(a||t)},providers:[l,x],imports:[[w.a,y]]}),t})()}}]);