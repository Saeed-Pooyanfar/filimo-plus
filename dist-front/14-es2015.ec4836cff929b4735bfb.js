(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{QtGm:function(t,a,i){"use strict";i.r(a),i.d(a,"TagModule",function(){return k});var n=i("tyNb"),e=i("d8ZE"),s=i("fXoL"),r=i("VHXb"),o=i("AytR"),c=i("tk/3");let l=(()=>{class t{constructor(t){this.http=t}getList(t){return this.http.post(o.a.baseUrl+"/tag/index",{tag:t})}next(t){return this.http.post(o.a.baseUrl+"/tag/next",{next:t})}}return t.\u0275fac=function(a){return new(a||t)(s.Pb(c.b))},t.\u0275prov=s.Cb({token:t,factory:t.\u0275fac}),t})();var b=i("73Ib"),g=i("ofXK"),d=i("FLaK"),p=i("ySUH");function u(t,a){if(1&t&&(s.Jb(0),s.Hb(1,"app-grid",4),s.Ib()),2&t){const t=a.$implicit,i=s.Ub();s.wb(1),s.Vb("includeTagLink",i.tag.multiSection)("list",t)}}function f(t,a){if(1&t){const t=s.Mb();s.Lb(0,"app-infinite-scroll",5),s.Sb("loadingChange",function(a){return s.Yb(t),s.Ub().infiniteScroll.loading=a}),s.Kb()}if(2&t){const t=s.Ub(),a=s.Xb(2);s.Vb("container",a)("disable",t.infiniteScroll.disable)("callback",t.infiniteScroll.callback)("loading",t.infiniteScroll.loading)}}let h=(()=>{class t{constructor(t,a,i){this.appData=t,this.tagService=a,this.activatedRoute=i}ngOnInit(){this.activatedRoute.data.subscribe({next:t=>{this.tag=t.tag,document.querySelector(".body").scrollTo({top:0,behavior:"smooth"})}}),this.infiniteScroll={disable:!this.tag.next,loading:!1,callback:()=>{this.tagService.next(this.tag.next).subscribe({next:t=>{e.a.i("TagService#next",t),t.success&&(this.tag.multiSection?this.tag.lists=this.tag.lists.concat(t.data.lists):this.tag.lists[0].items=this.tag.lists[0].items.concat(t.data.listItems),this.tag.next=t.data.next,this.infiniteScroll.disable=!this.tag.next)},error:t=>{e.a.e("TagService#next",t)},complete:()=>{this.infiniteScroll.loading=!1}})}}}ngOnDestroy(){const t=this.appData.data.tag.findIndex(t=>t.slug===this.tag.slug);1!==t&&(this.appData.data.tag[t]=this.tag)}}return t.\u0275fac=function(a){return new(a||t)(s.Gb(r.a),s.Gb(l),s.Gb(n.a))},t.\u0275cmp=s.Ab({type:t,selectors:[["app-tag"]],decls:5,vars:2,consts:[[1,"body","vertical-padding"],["scrollContainer",""],[4,"ngFor","ngForOf"],[3,"container","disable","callback","loading","loadingChange",4,"ngIf"],[3,"includeTagLink","list"],[3,"container","disable","callback","loading","loadingChange"]],template:function(t,a){if(1&t&&(s.Hb(0,"app-toolbar"),s.Lb(1,"div",0,1),s.dc(3,u,2,2,"ng-container",2),s.dc(4,f,1,4,"app-infinite-scroll",3),s.Kb()),2&t){const t=s.Xb(2);s.wb(3),s.Vb("ngForOf",a.tag.lists),s.wb(1),s.Vb("ngIf",t)}},directives:[b.a,g.h,g.i,d.a,p.a],styles:[""]}),t})();var v=i("mrSG"),m=i("vnd8");let S=(()=>{class t{constructor(t,a){this.appData=t,this.tagService=a}resolve(t){const a=t.paramMap.get("id")||"";return new Promise((t,i)=>{const n=this.appData.data.tag.find(t=>t.slug===a);n?t(n):this.tagService.getList(a).subscribe({next:a=>{if(e.a.i("TagResolver#resolve",a),a.success)return this.appData.data.tag.push(a.data),void t(a.data);i(new Error(a.message))},error:t=>{i(new Error(t))}})})}}return t.\u0275fac=function(a){return new(a||t)(s.Pb(r.a),s.Pb(l))},t.\u0275prov=s.Cb({token:t,factory:t.\u0275fac}),Object(v.b)([Object(m.a)()],t.prototype,"resolve",null),t})();const w=[{path:"",component:h,resolve:{tag:S}}];let x=(()=>{class t{}return t.\u0275mod=s.Eb({type:t}),t.\u0275inj=s.Db({factory:function(a){return new(a||t)},imports:[[n.g.forChild(w)],n.g]}),t})();var y=i("PCNd");let k=(()=>{class t{}return t.\u0275mod=s.Eb({type:t}),t.\u0275inj=s.Db({factory:function(a){return new(a||t)},providers:[l,S],imports:[[y.a,x]]}),t})()}}]);